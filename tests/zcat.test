#!/bin/bash

# Copyright 2014 Divya Kothari <divya.s.kothari@gmail.com>
# Copyright 2014 Naha Maggu <maggu.neha@gmail.com>

[ -f testing.sh ] && . testing.sh

# testing "name" "command" "result" "infile" "stdin"

echo "hello" > file
$HOST_BIN_TAR -czf file.gz file

$HOST_BIN_ZCAT file.gz > expected_out
testing "decompresses a single file" \
  'zcat file.gz > Tempfile && echo yes; diff Tempfile expected_out && echo yes' \
  "yes\nyes\n" "" ""

echo "one" > file1
echo "two" > file2
echo "three" > file3

$HOST_BIN_TAR -czf file1.gz file1
$HOST_BIN_TAR -czf file2.gz file2
$HOST_BIN_TAR -czf file3.gz file3

$HOST_BIN_ZCAT file1.gz file2.gz file3.gz > expected_out
testing "decompresses multiple files" \
  'zcat file1.gz file2.gz file3.gz > Tempfile && echo yes; diff Tempfile expected_out && echo yes' \
  "yes\nyes\n" "" ""
